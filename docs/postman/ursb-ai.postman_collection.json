{
  "info": {
    "_postman_id": "d6f1a2b8-3bb6-4d3d-9c30-7e1f2a6b1aaa",
    "name": "ursb-ai API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "description": "Collection to test URSB-AI API (Sanctum token auth). Import this into Postman."
  },
  "item": [
    {
      "name": "Login (get token)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"email\": \"{{email}}\",\n  \"password\": \"{{password}}\",\n  \"device_name\": \"{{device_name}}\"\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/login",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "login"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 200', function () { pm.response.to.have.status(200); });",
              "var jsonData = pm.response.json();",
              "pm.collectionVariables.set('token', jsonData.token);",
              "pm.test('token set', function () { pm.expect(pm.collectionVariables.get('token')).to.be.a('string'); });"
            ]
          }
        }
      ]
    },
    {
      "name": "Get Cars (list)",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/cars",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "cars"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 200', function () { pm.response.to.have.status(200); });",
              "pm.test('has data array', function () { var json = pm.response.json(); pm.expect(json.data || json).to.exist; });"
            ]
          }
        }
      ]
    },
    {
      "name": "Create Car",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"brand\": \"TestBrand\",\n  \"model\": \"ModelX\",\n  \"variant\": \"Sport\",\n  \"year\": 2025\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/v1/cars",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "cars"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 201', function () { pm.response.to.have.status(201); });",
              "var json = pm.response.json();",
              "pm.collectionVariables.set('car_id', json.id);",
              "pm.test('car_id set', function () { pm.expect(pm.collectionVariables.get('car_id')).to.be.ok; });"
            ]
          }
        }
      ]
    },
    {
      "name": "Show Car",
      "request": {
        "method": "GET",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/cars/{{car_id}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "cars",
            "{{car_id}}"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 200', function () { pm.response.to.have.status(200); });",
              "pm.test('response contains id', function () { var json = pm.response.json(); pm.expect(json.id || json.data.id).to.exist; });"
            ]
          }
        }
      ]
    },
    {
      "name": "Update Car",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          },
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"brand\": \"UpdatedBrand\",\n  \"model\": \"UpdatedModel\",\n  \"variant\": \"Updated\",\n  \"year\": 2024\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/v1/cars/{{car_id}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "cars",
            "{{car_id}}"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 200', function () { pm.response.to.have.status(200); });",
              "var json = pm.response.json();",
              "pm.test('updated brand present', function () { pm.expect(json.brand || json.data.brand).to.equal('UpdatedBrand'); });"
            ]
          }
        }
      ]
    },
    {
      "name": "Delete Car",
      "request": {
        "method": "DELETE",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/cars/{{car_id}}",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "cars",
            "{{car_id}}"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 204', function () { pm.response.to.have.status(204); });",
              "pm.collectionVariables.unset('car_id');"
            ]
          }
        }
      ]
    },
    {
      "name": "Logout (revoke token)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Authorization",
            "value": "Bearer {{token}}"
          }
        ],
        "url": {
          "raw": "{{base_url}}/api/v1/logout",
          "host": [
            "{{base_url}}"
          ],
          "path": [
            "api",
            "v1",
            "logout"
          ]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "type": "text/javascript",
            "exec": [
              "pm.test('status is 200', function () { pm.response.to.have.status(200); });",
              "pm.collectionVariables.unset('token');"
            ]
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://ursb-ai.test"
    },
    {
      "key": "email",
      "value": "user@example.com"
    },
    {
      "key": "password",
      "value": "secret"
    },
    {
      "key": "device_name",
      "value": "postman-client"
    },
    {
      "key": "token",
      "value": ""
    },
    {
      "key": "car_id",
      "value": ""
    }
  ]
}
